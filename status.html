<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hybrid Nights — Project Status</title>
<style>
  :root { --bg: #0d1117; --card: #161b22; --border: #30363d; --text: #c9d1d9; --heading: #f0f6fc; --green: #3fb950; --yellow: #d29922; --red: #f85149; --blue: #58a6ff; --dim: #8b949e; }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); padding: 24px; max-width: 1100px; margin: 0 auto; }
  h1 { color: var(--heading); font-size: 1.8em; margin-bottom: 4px; }
  .subtitle { color: var(--dim); margin-bottom: 24px; }
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 16px; margin-bottom: 24px; }
  .card { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 16px; }
  .card h2 { color: var(--heading); font-size: 1.1em; margin-bottom: 12px; border-bottom: 1px solid var(--border); padding-bottom: 8px; }
  .row { display: flex; justify-content: space-between; align-items: center; padding: 6px 0; border-bottom: 1px solid var(--border); }
  .row:last-child { border-bottom: none; }
  .label { color: var(--text); }
  .badge { padding: 2px 10px; border-radius: 12px; font-size: 0.8em; font-weight: 600; }
  .done { background: rgba(63,185,80,0.15); color: var(--green); }
  .partial { background: rgba(210,153,34,0.15); color: var(--yellow); }
  .none { background: rgba(248,81,73,0.15); color: var(--red); }
  .info { background: rgba(88,166,255,0.15); color: var(--blue); }
  .bar-container { background: var(--border); border-radius: 4px; height: 8px; margin-top: 8px; overflow: hidden; }
  .bar-fill { height: 100%; border-radius: 4px; transition: width 0.3s; }
  .bar-green { background: var(--green); }
  .bar-yellow { background: var(--yellow); }
  .summary { display: flex; gap: 24px; flex-wrap: wrap; margin-bottom: 24px; }
  .stat { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 16px 24px; text-align: center; min-width: 140px; }
  .stat .num { font-size: 2em; font-weight: 700; color: var(--heading); }
  .stat .lbl { color: var(--dim); font-size: 0.85em; }
  table { width: 100%; border-collapse: collapse; }
  th, td { text-align: left; padding: 8px 12px; border-bottom: 1px solid var(--border); }
  th { color: var(--dim); font-weight: 600; font-size: 0.85em; text-transform: uppercase; }
  .ts { color: var(--dim); font-size: 0.8em; text-align: right; margin-top: 24px; }
  /* Achievements section */
  .ach-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap; gap: 8px; }
  .ach-header h2 { color: var(--heading); font-size: 1.3em; margin: 0; }
  .ach-stats { display: flex; gap: 16px; align-items: center; flex-wrap: wrap; }
  .ach-stats .pts { color: var(--yellow); font-weight: 700; font-size: 1.1em; }
  .ach-stats .count { color: var(--dim); font-size: 0.9em; }
  .ach-progress { background: var(--border); border-radius: 6px; height: 12px; margin-bottom: 16px; overflow: hidden; }
  .ach-progress-fill { height: 100%; border-radius: 6px; background: linear-gradient(90deg, var(--yellow), var(--green)); transition: width 0.5s ease; }
  .ach-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 10px; margin-bottom: 16px; }
  .ach-item { display: flex; align-items: center; gap: 12px; background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 10px 14px; transition: border-color 0.2s; }
  .ach-item.unlocked { border-color: var(--green); }
  .ach-icon { width: 40px; height: 40px; border-radius: 6px; background: var(--border); display: flex; align-items: center; justify-content: center; font-size: 1.4em; flex-shrink: 0; }
  .ach-item.unlocked .ach-icon { background: rgba(63,185,80,0.2); }
  .ach-item.locked .ach-icon { opacity: 0.4; }
  .ach-info { flex: 1; min-width: 0; }
  .ach-name { color: var(--heading); font-weight: 600; font-size: 0.9em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .ach-item.locked .ach-name { color: var(--dim); }
  .ach-desc { color: var(--dim); font-size: 0.78em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .ach-pts { color: var(--yellow); font-weight: 700; font-size: 0.85em; flex-shrink: 0; }
  .ach-item.locked .ach-pts { color: var(--dim); }
  .ach-check { color: var(--green); font-weight: 700; flex-shrink: 0; }
  .ach-section { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 20px; margin-bottom: 24px; }
  .ach-recent h3 { color: var(--heading); font-size: 0.95em; margin-bottom: 8px; }
  .ach-recent-list { display: flex; flex-direction: column; gap: 6px; }
  .ach-recent-item { display: flex; justify-content: space-between; align-items: center; font-size: 0.85em; padding: 4px 0; border-bottom: 1px solid var(--border); }
  .ach-recent-item:last-child { border-bottom: none; }
  .ach-recent-name { color: var(--text); }
  .ach-recent-date { color: var(--dim); font-size: 0.8em; }
  .reload-btn { background: rgba(88,166,255,0.15); color: var(--blue); border: 1px solid var(--blue); border-radius: 6px; padding: 6px 14px; cursor: pointer; font-size: 0.8em; font-weight: 600; transition: background 0.2s; }
  .reload-btn:hover { background: rgba(88,166,255,0.3); }
  .ach-empty { color: var(--dim); font-style: italic; font-size: 0.9em; padding: 8px 0; }
</style>
</head>
<body>

<h1>Hybrid Nights</h1>
<p class="subtitle">Godot 4.6 &middot; GL Compatibility &middot; 3D Action-Adventure</p>

<div class="summary">
  <div class="stat"><div class="num">156</div><div class="lbl">Files Tracked</div></div>
  <div class="stat"><div class="num">3</div><div class="lbl">Characters</div></div>
  <div class="stat"><div class="num">14</div><div class="lbl">Player States</div></div>
  <div class="stat"><div class="num">7</div><div class="lbl">Test Suites</div></div>
  <div class="stat"><div class="num">~73</div><div class="lbl">Assertions</div></div>
</div>

<!-- ═══ ACHIEVEMENTS SECTION ═══ -->
<div class="ach-section" id="ach-section">
  <div class="ach-header">
    <h2>Achievements</h2>
    <div class="ach-stats">
      <span class="pts" id="ach-pts">0 / 0 pts</span>
      <span class="count" id="ach-count">(0 / 0 unlocked)</span>
      <button class="reload-btn" onclick="loadAchievements()">Reload Data</button>
    </div>
  </div>
  <div class="ach-progress"><div class="ach-progress-fill" id="ach-bar" style="width:0%"></div></div>

  <div class="ach-recent" id="ach-recent-section" style="display:none;">
    <h3>Recent Unlocks</h3>
    <div class="ach-recent-list" id="ach-recent"></div>
  </div>

  <div class="ach-grid" id="ach-grid">
    <p class="ach-empty">Loading achievements data...</p>
  </div>
</div>

<div class="grid">

  <div class="card">
    <h2>Core Systems</h2>
    <div class="row"><span class="label">State Machine (14 states)</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Character Hierarchy (3 classes)</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Hitbox / Hurtbox Combat</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Fireball Projectile</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">HealthComponent</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">AttackData Resource</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Input System (15 actions)</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Collision Layers (9)</span><span class="badge done">Done</span></div>
  </div>

  <div class="card">
    <h2>Companions</h2>
    <div class="row"><span class="label">CompanionBase + follow logic</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">FairyCompanion (drift)</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">DragonCompanion (attack)</span><span class="badge partial">Partial</span></div>
    <div class="row"><span class="label">CompanionBase.on_companion_action</span><span class="badge none">Stub</span></div>
    <div class="bar-container"><div class="bar-fill bar-yellow" style="width:65%"></div></div>
  </div>

  <div class="card">
    <h2>Enemies</h2>
    <div class="row"><span class="label">EnemyBase (5-state SM)</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">MeleeGrunt</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Detection Area AI</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Additional enemy types</span><span class="badge none">Not Started</span></div>
    <div class="bar-container"><div class="bar-fill bar-yellow" style="width:50%"></div></div>
  </div>

  <div class="card">
    <h2>Camera &amp; Lock-On</h2>
    <div class="row"><span class="label">Camera Rig</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Lock-On System</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">HUD Lock-On Indicator</span><span class="badge done">Done</span></div>
    <div class="bar-container"><div class="bar-fill bar-green" style="width:100%"></div></div>
  </div>

  <div class="card">
    <h2>UI / Menus</h2>
    <div class="row"><span class="label">TitleScreen</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">MainMenu</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">CharacterSelect</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">PauseMenu</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">HUD (hearts + hints)</span><span class="badge partial">Text Only</span></div>
    <div class="row"><span class="label">Settings</span><span class="badge partial">Minimal</span></div>
    <div class="bar-container"><div class="bar-fill bar-yellow" style="width:75%"></div></div>
  </div>

  <div class="card">
    <h2>Save System</h2>
    <div class="row"><span class="label">JSON save/load/delete</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Versioned + timestamped</span><span class="badge done">Done</span></div>
    <div class="row"><span class="label">Auto-save on level entry</span><span class="badge done">Done</span></div>
    <div class="bar-container"><div class="bar-fill bar-green" style="width:100%"></div></div>
  </div>

  <div class="card">
    <h2>Assets &amp; Polish</h2>
    <div class="row"><span class="label">3D Models</span><span class="badge none">Not Started</span></div>
    <div class="row"><span class="label">Animations</span><span class="badge none">Not Started</span></div>
    <div class="row"><span class="label">Audio / Music</span><span class="badge none">Not Started</span></div>
    <div class="row"><span class="label">UI Sprites / Textures</span><span class="badge none">Not Started</span></div>
    <div class="row"><span class="label">Particle Effects</span><span class="badge none">Not Started</span></div>
    <div class="bar-container"><div class="bar-fill bar-yellow" style="width:0%"></div></div>
  </div>

  <div class="card">
    <h2>Testing</h2>
    <table>
      <tr><th>Suite</th><th>Status</th></tr>
      <tr><td>test_project</td><td><span class="badge info">Structural</span></td></tr>
      <tr><td>test_characters</td><td><span class="badge info">Structural</span></td></tr>
      <tr><td>test_combat</td><td><span class="badge info">Structural</span></td></tr>
      <tr><td>test_enemies</td><td><span class="badge info">Structural</span></td></tr>
      <tr><td>test_save</td><td><span class="badge done">Functional</span></td></tr>
      <tr><td>test_input</td><td><span class="badge info">Structural</span></td></tr>
      <tr><td>test_ui</td><td><span class="badge info">Structural</span></td></tr>
    </table>
  </div>

</div>

<p class="ts">Auto-generated dashboard &middot; Last updated: 2026-02-16</p>

<script>
const ACH_ICONS = {
  first_steps:'\u{1F463}', choose_your_fighter:'\u{2694}', blade_dancer:'\u{1F5E1}',
  lance_bearer:'\u{1F531}', dragon_pact:'\u{1F409}', well_rounded:'\u{1F31F}',
  first_blood:'\u{1FA78}', fireball:'\u{1F525}', sky_walker:'\u{2601}',
  glider:'\u{1FA82}', dragon_dive:'\u{1F4A5}', high_flyer:'\u{1F680}',
  long_jumper:'\u{1F3C3}', companion_call:'\u{1F43E}', dragon_strike:'\u{26A1}',
  locked_on:'\u{1F3AF}', target_swap:'\u{1F504}', survivor:'\u{1F9E1}',
  full_recovery:'\u{1F49A}', save_scribe:'\u{1F4BE}', grunt_slayer:'\u{1F480}',
  untouchable:'\u{1F6E1}', settings_tweaker:'\u{2699}', night_warrior:'\u{1F451}'
};

function loadAchievements() {
  fetch('achievements.json?_=' + Date.now())
    .then(r => r.json())
    .then(renderAchievements)
    .catch(() => {
      document.getElementById('ach-grid').innerHTML =
        '<p class="ach-empty">Could not load achievements.json — place it in the project root.</p>';
    });
}

function renderAchievements(data) {
  const achs = data.achievements || [];
  const meta = data.meta || {};
  const earned = meta.totalPointsEarned || 0;
  const possible = meta.totalPointsPossible || achs.reduce((s,a) => s + a.points, 0);
  const unlockedList = achs.filter(a => a.unlocked);
  const pct = possible > 0 ? Math.round((earned / possible) * 100) : 0;

  document.getElementById('ach-pts').textContent = earned + ' / ' + possible + ' pts';
  document.getElementById('ach-count').textContent = '(' + unlockedList.length + ' / ' + achs.length + ' unlocked)';
  document.getElementById('ach-bar').style.width = pct + '%';

  // Recent unlocks (most recent 5)
  const recentSection = document.getElementById('ach-recent-section');
  const recentEl = document.getElementById('ach-recent');
  const recent = unlockedList
    .filter(a => a.unlockedAt)
    .sort((a, b) => new Date(b.unlockedAt) - new Date(a.unlockedAt))
    .slice(0, 5);

  if (recent.length > 0) {
    recentSection.style.display = 'block';
    recentEl.innerHTML = recent.map(a => {
      const icon = ACH_ICONS[a.id] || '\u{1F3C6}';
      const date = new Date(a.unlockedAt).toLocaleDateString();
      return '<div class="ach-recent-item">' +
        '<span class="ach-recent-name">' + icon + ' ' + esc(a.name) + '</span>' +
        '<span class="ach-recent-date">' + date + '</span>' +
      '</div>';
    }).join('');
  } else {
    recentSection.style.display = 'none';
  }

  // Full grid
  const grid = document.getElementById('ach-grid');
  grid.innerHTML = achs.map(a => {
    const cls = a.unlocked ? 'unlocked' : 'locked';
    const icon = ACH_ICONS[a.id] || '\u{1F3C6}';
    const check = a.unlocked ? '<span class="ach-check">\u2713</span>' : '';
    return '<div class="ach-item ' + cls + '">' +
      '<div class="ach-icon">' + icon + '</div>' +
      '<div class="ach-info">' +
        '<div class="ach-name">' + esc(a.name) + '</div>' +
        '<div class="ach-desc">' + esc(a.description) + '</div>' +
      '</div>' +
      '<span class="ach-pts">+' + a.points + '</span>' +
      check +
    '</div>';
  }).join('');
}

function esc(s) {
  const d = document.createElement('div');
  d.textContent = s;
  return d.innerHTML;
}

loadAchievements();
</script>

</body>
</html>
